<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">

    <title>Конструктор памятника</title>

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="content-box">
        <header class="header">
            <div class="container">
                <div class="header__wrapper pad-r pad-l">
                    <div class="header__left">
                        <input type="image" onclick="window.document.location='firststep'" src="images/Back.svg" />

                        <span class="header__title">
                            Конструктор памятника
                        </span>
                    </div>

                    <div class="header__right">
                        <div class="header__phone">
                            <div class="header__phone-img">
                                <img src="images/a1.png" alt="a1">
                            </div>

                            <a href="tel:+375293182000" class="header__phone-link">(29) 318 20 00</a>
                        </div>

                        <div class="header__cart">
                            <button class="header__cart-btn">
                                <svg width="45" height="45" viewBox="0 0 45 45" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M33.356 17.0938L33.2565 17.4173L30.6186 25.993L30.6186 25.9933C30.5732 26.1403 30.4818 26.2688 30.358 26.36C30.2341 26.4512 30.0842 26.5003 29.9304 26.5M33.356 17.0938L29.9309 26.25M33.356 17.0938H33.0176H15.491H15.1596L15.2506 17.4124L17.6987 25.9788L17.6987 25.9789C17.7417 26.1292 17.8325 26.2613 17.9573 26.3554C18.0821 26.4494 18.2342 26.5002 18.3905 26.5M33.356 17.0938L18.3902 26.25M29.9304 26.5L29.9309 26.25M29.9304 26.5H29.9309V26.25M29.9304 26.5H18.3905M29.9309 26.25H18.3902M18.3905 26.5L18.3902 26.25M18.3905 26.5H18.3902V26.25M33.0176 17.3438L32.9407 17.5938H33.0176V17.3438ZM33.0176 17.3438L32.7786 17.2702L32.756 17.3438H33.0176ZM15.491 17.3438L15.7314 17.2751L15.751 17.3438H15.491ZM15.491 17.3438V17.5938H15.5625L15.491 17.3438ZM36.0271 16.2776L36.0271 16.2777L32.829 26.6722L32.8288 26.673C32.6402 27.2938 32.2565 27.8372 31.7346 28.2226C31.2128 28.608 30.5805 28.8149 29.9318 28.8125H29.9309L18.391 28.8125C18.3909 28.8125 18.3907 28.8125 18.3905 28.8125C17.7321 28.8102 17.0922 28.5948 16.5665 28.1983C16.0408 27.8018 15.6577 27.2457 15.4746 26.6132C15.4746 26.6131 15.4745 26.613 15.4745 26.6129L11.4681 12.5876L11.4163 12.4062H11.2277H10.0781C9.77147 12.4062 9.47737 12.2844 9.26053 12.0676C9.04369 11.8508 8.92188 11.5567 8.92188 11.25C8.92188 10.9433 9.04369 10.6492 9.26053 10.4324C9.47737 10.2156 9.77147 10.0938 10.0781 10.0938H11.5801C12.0349 10.0952 12.4769 10.2441 12.84 10.518C13.203 10.792 13.4675 11.1762 13.5937 11.6132C13.5937 11.6133 13.5938 11.6134 13.5938 11.6135L14.4479 14.6L14.4998 14.7812H14.6883H34.9219C35.1028 14.7812 35.2813 14.8237 35.4428 14.9052C35.6044 14.9867 35.7446 15.105 35.8521 15.2506C35.9596 15.3961 36.0314 15.5649 36.0618 15.7433C36.0922 15.9217 36.0803 16.1047 36.0271 16.2776ZM20.1406 32.8125C20.1406 33.2266 20.0178 33.6314 19.7878 33.9757C19.5577 34.32 19.2307 34.5884 18.8481 34.7469C18.4655 34.9053 18.0446 34.9468 17.6384 34.866C17.2323 34.7852 16.8592 34.5858 16.5664 34.293C16.2736 34.0002 16.0741 33.6271 15.9934 33.221C15.9126 32.8148 15.954 32.3938 16.1125 32.0113C16.271 31.6287 16.5393 31.3017 16.8836 31.0716C17.228 30.8415 17.6328 30.7188 18.0469 30.7188C18.6022 30.7188 19.1347 30.9393 19.5274 31.332C19.92 31.7246 20.1406 32.2572 20.1406 32.8125ZM29.0711 31.0716C29.4155 30.8415 29.8203 30.7188 30.2344 30.7188C30.7897 30.7188 31.3222 30.9393 31.7149 31.332C32.1075 31.7246 32.3281 32.2572 32.3281 32.8125C32.3281 33.2266 32.2053 33.6314 31.9753 33.9757C31.7452 34.32 31.4182 34.5884 31.0356 34.7469C30.653 34.9053 30.2321 34.9468 29.8259 34.866C29.4198 34.7852 29.0467 34.5858 28.7539 34.293C28.4611 34.0002 28.2616 33.6271 28.1809 33.221C28.1001 32.8148 28.1415 32.3938 28.3 32.0113C28.4585 31.6287 28.7268 31.3017 29.0711 31.0716Z"
                                        fill="#5A7794" stroke="white" stroke-width="0.5" />
                                    <rect x="0.5" y="0.5" width="44" height="44" rx="4.5" stroke="#5A7794" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
        </header>

        <section class="constructor">
            <div class="container">
                <div class="constructor__wrapper">
                    <div class="constructor__steps">
                        <img src="images/step2.svg" />
                    </div>

                    <div class="constructor__image">
                        <img class="constructor__image-img" id="_targetImage" src="images/main-image.jpg"
                            alt="background image">
                        <div class="constructor__image-top-btns">
                            <div>
                                <button id="_idLeft" class="constructor__image-left constructor__image-pos"
                                    onclick="Change(2)" disabled>
                                    <svg width="26" height="26" viewBox="0 0 26 26" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <g clip-path="url(#clip0_207_1497)">
                                            <path class="left-path" d="M13.0369 4.81514H4.815V21.1851H13.0369V4.81514Z"
                                                fill="#CFD8E0" stroke="#CFD8E0" stroke-miterlimit="22.9256"
                                                stroke-linecap="round" stroke-linejoin="round" />
                                            <path class="right-path"
                                                d="M21.1849 4.81514H12.963V21.1851H21.1849V4.81514Z" stroke="#CFD8E0"
                                                stroke-miterlimit="22.9256" stroke-linecap="round"
                                                stroke-linejoin="round" />
                                            <path class="around-path" d="M20.9783 0.72139H25.2788V5.05636"
                                                stroke="#CFD8E0" stroke-width="2" stroke-miterlimit="22.9256" />
                                            <path class="around-path" d="M20.9783 25.2789H25.2788V20.9439"
                                                stroke="#CFD8E0" stroke-width="2" stroke-miterlimit="22.9256" />
                                            <path class="around-path" d="M5.02429 0.72139H0.721313V5.05636"
                                                stroke="#CFD8E0" stroke-width="2" stroke-miterlimit="22.9256" />
                                            <path class="around-path" d="M5.02429 25.2789H0.721313V20.9439"
                                                stroke="#CFD8E0" stroke-width="2" stroke-miterlimit="22.9256" />
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_207_1497">
                                                <rect width="26" height="26" fill="white" />
                                            </clipPath>
                                        </defs>
                                    </svg>
                                </button>
                            </div>
                            <div>
                                <button id="_idCenter" class="constructor__image-center constructor__image-pos"
                                    onclick="Change(1)" disabled>
                                    <svg width="26" height="26" viewBox="0 0 26 26" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <g clip-path="url(#clip0_207_1497)">
                                            <path class="left-path" d="M13.0369 4.81514H4.815V21.1851H13.0369V4.81514Z"
                                                fill="#CFD8E0" stroke="#CFD8E0" stroke-miterlimit="22.9256"
                                                stroke-linecap="round" stroke-linejoin="round" />
                                            <path class="right-path"
                                                d="M21.1849 4.81514H12.963V21.1851H21.1849V4.81514Z" fill="#CFD8E0"
                                                stroke="#CFD8E0" stroke-miterlimit="22.9256" stroke-linecap="round"
                                                stroke-linejoin="round" />
                                            <path class="around-path" d="M20.9783 0.72139H25.2788V5.05636"
                                                stroke="#CFD8E0" stroke-width="2" stroke-miterlimit="22.9256" />
                                            <path class="around-path" d="M20.9783 25.2789H25.2788V20.9439"
                                                stroke="#CFD8E0" stroke-width="2" stroke-miterlimit="22.9256" />
                                            <path class="around-path" d="M5.02429 0.72139H0.721313V5.05636"
                                                stroke="#CFD8E0" stroke-width="2" stroke-miterlimit="22.9256" />
                                            <path class="around-path" d="M5.02429 25.2789H0.721313V20.9439"
                                                stroke="#CFD8E0" stroke-width="2" stroke-miterlimit="22.9256" />
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_207_1497">
                                                <rect width="26" height="26" fill="white" />
                                            </clipPath>
                                        </defs>
                                    </svg>
                                </button>
                            </div>
                            <div>
                                <button id="_idRight" class="constructor__image-right constructor__image-pos"
                                    onclick="Change(3)" disabled>
                                    <svg width="26" height="26" viewBox="0 0 26 26" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <g clip-path="url(#clip0_207_1497)">
                                            <path class="left-path" d="M13.0369 4.81514H4.815V21.1851H13.0369V4.81514Z"
                                                stroke="#CFD8E0" stroke-miterlimit="22.9256" stroke-linecap="round"
                                                stroke-linejoin="round" />
                                            <path class="right-path"
                                                d="M21.1849 4.81514H12.963V21.1851H21.1849V4.81514Z" fill="#CFD8E0"
                                                stroke="#CFD8E0" stroke-miterlimit="22.9256" stroke-linecap="round"
                                                stroke-linejoin="round" />
                                            <path class="around-path" d="M20.9783 0.72139H25.2788V5.05636"
                                                stroke="#CFD8E0" stroke-width="2" stroke-miterlimit="22.9256" />
                                            <path class="around-path" d="M20.9783 25.2789H25.2788V20.9439"
                                                stroke="#CFD8E0" stroke-width="2" stroke-miterlimit="22.9256" />
                                            <path class="around-path" d="M5.02429 0.72139H0.721313V5.05636"
                                                stroke="#CFD8E0" stroke-width="2" stroke-miterlimit="22.9256" />
                                            <path class="around-path" d="M5.02429 25.2789H0.721313V20.9439"
                                                stroke="#CFD8E0" stroke-width="2" stroke-miterlimit="22.9256" />
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_207_1497">
                                                <rect width="26" height="26" fill="white" />
                                            </clipPath>
                                        </defs>
                                    </svg>
                                </button>
                            </div>
                        </div>


                        <button class="constructor__image-btn" type="button" data-bs-toggle="dropdown">Площадка</button>

                        <div class="dropdown-menu constructor__image-menu">
                            <a class="constructor__image-item active"
                                href="javascript:document.location='constructor'">Без
                                площадки</a>
                            <a class="constructor__image-item" href="javascript:InnerProcessImage(1,1)">Захоронение
                                140x230 см</a>
                            <a class="constructor__image-item" href="javascript:InnerProcessImage(2,2)">Захоронение
                                200x230 см</a>
                            <a class="constructor__image-item" href="javascript:InnerProcessImage(3,5)">Захоронение
                                300x230 см</a>
                        </div>

                    </div>

                    <div class="constructor__menu">
                        <button class="constructor__menu-btn" onclick="document.location='tumbs'">Тумба</button>
                        <button class="constructor__menu-btn" onclick="document.location='stells'">Стела</button>
                        <button class="constructor__menu-btn" onclick="document.location='flowerports'">Цветник</button>
                        <button class="constructor__menu-btn" onclick="document.location='plates'">Надгробие</button>
                        <button class="constructor__menu-btn" onclick="document.location='fences'">Ограда</button>
                        <button class="constructor__menu-btn" onclick="document.location='picks'">Наконечники</button>
                        <button class="constructor__menu-btn" onclick="document.location='benches'">Скамья</button>
                        <button class="constructor__menu-btn" onclick="document.location='vazhi'">Вазы</button>
                        <button class="constructor__menu-btn" onclick="document.location='lampads'">Лампады</button>
                    </div>
                </div>
            </div>
        </section>

        <section class="order">
            <div class="container">
                <div class="order__wrapper">
                    <a class="order__text" href="">Перейти к худ. оформлению стеллы</a>

                    <div class="order__buttons">
                        <div class="order__buttons-box">
                            <button id="_continueBtn" class="order__btn continie-btn"
                                onclick="document.location='stella'" disabled>Перейти к гравировке</button>
                            <button id="_agreementBtn" class="order__btn " onclick="document.location='afterstella'"
                                disabled>К
                                ДОГОВОРУ</button>
                        </div>

                        <button class="order__btn total-btn">Итого:<span class="total-btn-span"><span
                                    id="_totalPrice">0</span>
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M12 16C11.7664 16.0005 11.5399 15.9191 11.36 15.77L5.36003 10.77C5.15581 10.6003 5.02739 10.3564 5.00301 10.0919C4.97863 9.8275 5.06029 9.56422 5.23003 9.36C5.39977 9.15578 5.64368 9.02736 5.90811 9.00298C6.17253 8.9786 6.43581 9.06026 6.64003 9.23L12 13.71L17.36 9.39C17.4623 9.30694 17.58 9.2449 17.7064 9.20747C17.8327 9.17004 17.9652 9.15795 18.0962 9.17189C18.2272 9.18582 18.3542 9.22552 18.4699 9.2887C18.5855 9.35187 18.6875 9.43727 18.77 9.54C18.8616 9.64282 18.931 9.76345 18.9738 9.89432C19.0166 10.0252 19.0319 10.1635 19.0187 10.3006C19.0056 10.4376 18.9643 10.5705 18.8974 10.6909C18.8305 10.8112 18.7395 10.9165 18.63 11L12.63 15.83C12.4449 15.9555 12.2231 16.0154 12 16Z"
                                        fill="#001333" />
                                </svg>
                            </span></button>
                    </div>
                </div>
            </div>
        </section>
    </div>
</body>
<script>
    const imageBtn = document.querySelector('.constructor__image-btn');
    const imageMenu = document.querySelector('.constructor__image-menu');
    const imageMenuItems = document.querySelectorAll('.constructor__image-item');

    imageBtn.addEventListener('click', () => {
        imageMenu.classList.toggle('visible');
    })

    imageMenu.addEventListener('click', (e) => {
        if (e.target.classList.contains('constructor__image-item')) {
            imageMenuItems.forEach(item => item.classList.remove('active'))

            e.target.classList.add('active');
            imageMenu.classList.toggle('visible');
        }
    })
</script>
<script>
    const topBtnsParent = document.querySelector('.step4__image-top-btns');

    // визуальное переключение кпопок расположения памятника при помощи добавления класса active
    topBtnsParent.addEventListener('click', (e) => {
        const btns = document.querySelectorAll('.step4__image-pos');
        const targetBtn = e.target.closest('.step4__image-pos');

        if (targetBtn) {
            btns.forEach(btn => btn.classList.remove('active'));

            targetBtn.classList.add('active');
        }
    })
</script>
<script language="javascript">
    function SendToTumbs() {
        window.document.location = "tumbs";
    }
    function ParseRelativePath(path) {
        //alert(path);
        var splitStrings = path.split("/");
        var relPath = "";
        for (var i = 0; i < splitStrings.length; i++) {
            if (i > 2) {
                relPath = relPath + splitStrings[i];
                if (i != splitStrings.length - 1) {
                    relPath = relPath + "/";
                }
            }
        }

        return relPath;
    }

    function Change(position) {
        var request = new XMLHttpRequest();
        var url = "change?position=" + position;
        request.open("GET", url, true);

        request.addEventListener("readystatechange", () => {
            if (request.readyState == 4) {
                //alert(request.status);
                if (request.status == 200) {
                    //alert('200');
                    //alert(request.responseText);
                    var info = JSON.parse(request.responseText);
                    document.getElementById('_targetImage').src = info["imgUrl"];
                    document.getElementById('_totalPrice').innerHTML = info["price"];
                }
                else {
                    alert('Something wrong');

                }
            }
        });

        request.send();
    }

    function InnerProcessImage(number, type) {
        var request = new XMLHttpRequest();
        var url = "processImageAndPrice?number=" + number + "&type=" + type;
        request.open("GET", url, true);

        request.addEventListener("readystatechange", () => {
            if (request.readyState == 4) {
                //alert(request.status);
                if (request.status == 200) {
                    //alert('200');
                    //alert(request.responseText);
                    var info = JSON.parse(request.responseText);
                    document.getElementById("_continueBtn").classList.add("active");
                    document.getElementById("_continueBtn").removeAttribute('disabled');
                    document.getElementById("_agreementBtn").classList.add("active");
                    document.getElementById("_agreementBtn").removeAttribute('disabled');
                    document.getElementById('_targetImage').src = info["imgUrl"];
                    document.getElementById('_totalPrice').innerHTML = info["price"];

                    document.getElementById("_idLeft").removeAttribute('disabled');
                    document.getElementById("_idCenter").removeAttribute('disabled');
                    document.getElementById("_idRight").removeAttribute('disabled');

                    document.getElementById("_idCenter").classList.add("active");
                    document.getElementById("_idLeft").classList.remove("active");
                    document.getElementById("_idRight").classList.remove("active");
                }
                else {
                    alert('Something wrong');

                }
            }
        });

        request.send();
    }

    function ImageElementClick() {
        var src = ParseRelativePath(window.event.srcElement.src);

        var request = new XMLHttpRequest();
        var url = "process?imageUrl=" + src;
        request.open("GET", url, true);
        //request.setRequestHeader("Content-Type","application/json");
        request.addEventListener("readystatechange", () => {
            if (request.readyState == 4) {
                //alert(request.status);
                if (request.status == 200) {
                    //alert('200');
                    //alert(request.responseText);
                    document.getElementById('_targetImage').src = request.responseText;
                }
                else {
                    alert('Something wrong');
                    //$("#_invalidCode").text("Неверный код авторизации");
                }
            }
        });

        request.send();
        //alert(src);
    }

</script>

</html>